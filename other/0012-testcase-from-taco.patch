From e6247d9042d4de00c55153a33c082d6d16702f4d Mon Sep 17 00:00:00 2001
From: Ad <hiraditya@msn.com>
Date: Mon, 28 Nov 2016 23:28:20 -0600
Subject: [PATCH 12/12] testcase from taco

---
 .../Transforms/GVNHoist/dj-edge-detect-das-taco.ll | 51 ++++++++++++++++++++++
 1 file changed, 51 insertions(+)
 create mode 100644 test/Transforms/GVNHoist/dj-edge-detect-das-taco.ll

diff --git a/test/Transforms/GVNHoist/dj-edge-detect-das-taco.ll b/test/Transforms/GVNHoist/dj-edge-detect-das-taco.ll
new file mode 100644
index 0000000..6b7595f
--- /dev/null
+++ b/test/Transforms/GVNHoist/dj-edge-detect-das-taco.ll
@@ -0,0 +1,51 @@
+; RUN: opt -S -gvn-hoist < %s | FileCheck %s
+
+; CHECK: Found a JEdge: bb7 -> bb2
+; CHECK: Found a JEdge: bb6 -> bb5
+; CHECK: Found a JEdge: bb4 -> bb5
+; CHECK: Found a JEdge: bb9 -> bb6
+; CHECK: Found a JEdge: bb5 -> bb6
+; CHECK: Found a JEdge: bb10 -> bb8
+; CHECK: MergeSet of: bb4: bb5, 
+; CHECK: MergeSet of: bb7: bb2, 
+; CHECK: MergeSet of: bb6: bb5, 
+; CHECK: MergeSet of: bb5: bb5, bb6, 
+; CHECK: MergeSet of: bb10: bb8, 
+; CHECK: MergeSet of: bb2: 
+; CHECK: MergeSet of: bb8: 
+; CHECK: MergeSet of: bb9: bb5, bb6,
+
+define void @irreducible() {
+bb1:
+br label %bb2
+
+bb2:
+  br i1 undef, label %bb3, label %bb11
+
+bb3:
+  br i1 undef, label %bb4, label %bb8
+
+bb4:
+  br label %bb5
+
+bb5:
+  br label %bb6
+
+bb6: 
+  br i1 undef, label %bb7, label %bb5
+
+bb7:
+  br label %bb2
+
+bb8:
+  br label %bb9
+
+bb9:
+  br i1 undef, label %bb6, label %bb10
+
+bb10:
+  br label %bb8
+
+bb11:
+  ret void
+}
-- 
2.5.0

